---
# We dont't add user/group when using vagrant as uid/gid clashes as extra users
# exist in the image

- name: Ensure group "postgres" exists
  group:
    name: postgres
    state: present
    gid: 117
    system: yes
  when: nectar_test_build | default(False) == False

- name: Ensure user "postgres" exists
  user:
    name: postgres
    shell: /bin/bash
    system: yes
    home: /var/lib/postgresql
    create_home: no
    group: postgres
    uid: 111
    comment: 'PostgreSQL administrator'
  when: nectar_test_build | default(False) == False
